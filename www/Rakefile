# -*- ruby -*-

task :default => :dot

directory 'svg'

FileList[ '_dot/*.dot' ].each do |dot|
  svg = dot.sub( /(\.dot)$/, '.svg' ).sub( /^(_dot)/, 'svg' )

  file svg => [ dot, 'svg' ] do
    sh "dot -Tsvg -o #{svg} #{dot}"
  end

  task :dot => svg
end

task :clean do
  rm_rf %w[ svg _site ]
end
